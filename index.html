<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Nigeria Personal Income Tax Calculator (2026)</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    label { display: block; margin-top: 10px; }
    input { width: 200px; padding: 5px; }
    .group { margin-bottom: 15px; }
    #result { margin-top: 20px; padding: 10px; background-color: #f0f0f0; }
    .add-btn, .remove-btn { margin-left: 10px; }
    .income-list, .deduction-list { margin-bottom: 10px; }
    .item-row { display: flex; align-items: center; margin-bottom: 5px; }
    .item-row input { margin-right: 8px; }
  </style>
</head>
<body>
  <h2>Nigeria Personal Income Tax Calculator (from Jan 2026)</h2>
  <div class="group">
    <strong>Income Sources (Annual)</strong>
    <div id="incomeList" class="income-list"></div>
    <button class="add-btn" onclick="addIncome()">Add Income Source</button>
  </div>
  <div class="group">
    <strong>Deductions (Annual)</strong>
    <div id="deductionList" class="deduction-list"></div>
    <button class="add-btn" onclick="addDeduction()">Add Deduction</button>
  </div>
  <div class="group">
    <label>
      Annual Rent Paid (₦):
      <input type="number" id="rentPaid" value="0" />
    </label>
  </div>
  <button onclick="calculateTax()">Calculate Tax</button>
  <div id="result"></div>

  <script>
    // Initial setup: one income and one deduction row
    window.onload = function() {
      addIncome();
      addDeduction();
    };

    function addIncome(name = "", value = "") {
      const list = document.getElementById('incomeList');
      const idx = list.children.length;
      const row = document.createElement('div');
      row.className = "item-row";
      row.innerHTML = `
        <input type="text" placeholder="Description" value="${name}" />
        <input type="number" placeholder="Amount (₦)" value="${value}" />
        <button class="remove-btn" onclick="this.parentElement.remove()">Remove</button>
      `;
      list.appendChild(row);
    }

    function addDeduction(name = "", value = "") {
      const list = document.getElementById('deductionList');
      const idx = list.children.length;
      const row = document.createElement('div');
      row.className = "item-row";
      row.innerHTML = `
        <input type="text" placeholder="Description" value="${name}" />
        <input type="number" placeholder="Amount (₦)" value="${value}" />
        <button class="remove-btn" onclick="this.parentElement.remove()">Remove</button>
      `;
      list.appendChild(row);
    }

    function calculateTax() {
      // Get all income sources
      let gross = 0;
      const incomeRows = document.getElementById('incomeList').children;
      for (let row of incomeRows) {
        const val = parseFloat(row.children[1].value) || 0;
        gross += val;
      }

      // Get all deductions
      let deductions = 0;
      const deductionRows = document.getElementById('deductionList').children;
      for (let row of deductionRows) {
        const val = parseFloat(row.children[1].value) || 0;
        deductions += val;
      }

      let rent = parseFloat(document.getElementById('rentPaid').value) || 0;

      // Rent relief: 20% of rent, capped at 500,000
      let rentRelief = rent * 0.20;
      if (rentRelief > 500000) rentRelief = 500000;

      // Adjusted income after deductions
      let adj = gross - deductions - rentRelief;
      if (adj < 0) adj = 0;

      // If adj ≤ 800,000 → no tax
      if (adj <= 800000) {
        document.getElementById('result').innerHTML =
          `<strong>No tax payable</strong> (taxable income ₦${adj.toLocaleString()}).`;
        return;
      }

      // Apply tax bands
      let taxable = adj;
      let tax = 0;

      function taxSlice(amount, rate) {
        return amount * rate;
      }

      let remaining = taxable - 800000;

      // Band 2: 800,001 – 3,000,000 @ 15%
      if (remaining > 0) {
        let slice = Math.min(remaining, 3000000 - 800000);
        tax += taxSlice(slice, 0.15);
        remaining -= slice;
      }
      // Band 3: 3,000,001 – 12,000,000 @ 18%
      if (remaining > 0) {
        let slice = Math.min(remaining, 12000000 - 3000000);
        tax += taxSlice(slice, 0.18);
        remaining -= slice;
      }
      // Band 4: 12,000,001 – 25,000,000 @ 21%
      if (remaining > 0) {
        let slice = Math.min(remaining, 25000000 - 12000000);
        tax += taxSlice(slice, 0.21);
        remaining -= slice;
      }
      // Band 5: 25,000,001 – 50,000,000 @ 23%
      if (remaining > 0) {
        let slice = Math.min(remaining, 50000000 - 25000000);
        tax += taxSlice(slice, 0.23);
        remaining -= slice;
      }
      // Band 6: above 50,000,000 @ 25%
      if (remaining > 0) {
        tax += taxSlice(remaining, 0.25);
      }

      let effRate = (tax / gross) * 100;

      document.getElementById('result').innerHTML =
        `<p>Total gross annual income: ₦${gross.toLocaleString()}</p>` +
        `<p>Total deductions: ₦${deductions.toLocaleString()}</p>` +
        `<p>Rent relief: ₦${rentRelief.toLocaleString()}</p>` +
        `<p>Taxable income after deductions: ₦${adj.toLocaleString()}</p>` +
        `<p><strong>Tax payable:</strong> ₦${tax.toLocaleString(undefined, {maximumFractionDigits:0})}</p>` +
        `<p>Effective tax rate on gross income: ${effRate.toFixed(2)}%</p>`;
    }
  </script>
</body>
</html>
